Generic single-database configuration with an async dbapi.

Stairway test

Простой и эффективный метод проверки отсутствия опечаток миграции и отката всех изменений схемы. Не требует обслуживания - вы можете один раз добавить этот тест в свой проект и забыть о нем.

В частности, тест обнаруживает типы данных, которые ранее были созданы методом upgrade() 
и не были удалены при downgreade(): при создании таблицы/столбца Alembic автоматически создает пользовательские типы данных, указанные в столбцах (например, enum), но не удаляет их при удалении таблицы или столбца - разработчику приходится делать это вручную.

Принцип работы

Тест извлекает весь список миграций, и для каждой миграции выполняются команды обновления, понижения, обновления.